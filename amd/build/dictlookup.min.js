function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}define("mod_wordcards/dictlookup",["jquery","core/log","core/ajax","core/templates"],(function($,log,ajax,templates){return log.debug("Wordcards dictionary lookup: initialising"),{init:function(cmid,modid,resultscont){log.debug("Wordcards dictionary lookup: initialising"),this.cmid=cmid,this.modid=modid,this.resultscont=resultscont},update_page:function(alldata){var that=this;that.resultscont.empty();for(var i=0;i<alldata.length;i++){var tdata=alldata[i];templates.render("mod_wordcards/word_wizard_oneresult",tdata).then((function(html,js){that.resultscont.append(html),templates.runTemplateJS(js)}))}},getwords:function(allwords,sourcelang,definitionslang){var fn,_ref,that=this,langs=["ar","id","zh","zh_tw","ja","ko","pt","es","th","vi","fr","rus"];if(""===allwords.trim())return!1;ajax.call([{methodname:"mod_wordcards_search_dictionary",args:{terms:allwords,cmid:that.cmid,sourcelang:sourcelang,targetlangs:definitionslang},async:!1}])[0].then((fn=regeneratorRuntime.mark((function _callee(response){var allterms_result,terms,i,theterm,senses,tdata,sindex,sense,sourcedefinition,alltrans,ti,translations,definition,modelsentence;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(allterms_result=[],0!==response.success){_context.next=4;break}return log.debug(response.payload),_context.abrupt("return",allterms_result);case 4:for(terms=JSON.parse(response.payload),i=0;i<terms.length;i++)if(0===(theterm=terms[i]).count)(senses=[]).push({definition:"",sourcedefinition:"No def. available",modelsentence:"",senseindex:0,translations:"{}"}),tdata={term:theterm.term,senses:senses,modid:that.modid},allterms_result.push(tdata);else{for(sindex in tdata={term:theterm.term,senses:[],modid:that.modid},theterm.results){for(sense=theterm.results[sindex],sourcedefinition=sense.definition,alltrans={},ti=0;ti<langs.length;ti++)alltrans[langs[ti]]=sense["lang_"+langs[ti]];translations=JSON.stringify(alltrans),definition=sourcedefinition,"en"!==definitionslang&&(definition=sense.hasOwnProperty("lang_"+definitionslang)?sense["lang_"+definitionslang]:"en"===definitionslang?sense.meaning:"No translation available"),modelsentence=sense.example,tdata.senses.push({definition:definition,sourcedefinition:sourcedefinition,modelsentence:modelsentence,senseindex:sindex,translations:translations})}allterms_result.push(tdata)}that.update_page(allterms_result);case 7:case"end":return _context.stop()}}),_callee)})),_ref=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(_x){return _ref.apply(this,arguments)}))}}}));

//# sourceMappingURL=dictlookup.min.js.map