{"version":3,"file":"cardactions.min.js","sources":["../src/cardactions.js"],"sourcesContent":["/**\n * Module to manage actions on a card in learn mode in mod_wordcards.\n *\n * @package mod_wordcards\n * @author Justin Hunt - justin@poodll.com\n */\ndefine(['jquery', 'core/ajax', 'core/str', 'core/log', 'mod_wordcards/youglish'], function($, ajax, str,log, youglish) {\n    const SELECTOR = {\n        CARDCONTAINER: '.flip-card',\n        CARD: '.definition_flashcards .wc-faces.flip-card-inner',\n        FRONTFACE: '[data-face=\"term\"]',\n        BACKFACE: '[data-face=\"details\"]',\n        YOUGLISH_HOLDER: '.term-video',\n        YOUGLISH_WIDGET: '#mod_wordcardsyouglish-widget',\n        YOUGLISH_PLACEHOLDER: '.youglish-placeholder',\n    }\n\n\n    const EVENT = {\n        CLICK: 'click',\n        HOVERIN: 'mouseover',\n        HOVEROUT: 'mouseout'\n    }\n\n\n    var stringStore = {};\n\n    const initStrings = function (callback) {\n        str.get_strings([\n            {key: \"addtomywords\", component: \"mod_wordcards\"},\n            {key: \"removefrommywords\", component: \"mod_wordcards\"},\n        ]).done(function (strings) {\n            stringStore = strings;\n            if (typeof callback == 'function') {\n                callback();\n            }\n        });\n    };\n\n    const initYouGlish = function() {\n        $.getScript('https://youglish.com/public/emb/widget.js', function(){\n            log.debug('youglish script loaded');\n        });\n    };\n\n    const clearYouGlish = function(currentface) {\n        log.debug('clearYouGlish');\n        var youglishwidget = $(SELECTOR.YOUGLISH_WIDGET);\n        var youglishplaceholder = currentface.find(SELECTOR.YOUGLISH_PLACEHOLDER);\n        youglishplaceholder.show();\n        youglishwidget.hide();\n        youglish.clear();\n    }\n    const loadYouGlish = function(currentface) {\n        log.debug('loadYouGlish');\n        var youglishholder = currentface.find(SELECTOR.YOUGLISH_HOLDER);\n        var youglishplaceholder = currentface.find(SELECTOR.YOUGLISH_PLACEHOLDER);\n        youglish.load(youglishplaceholder.data('term'),youglishholder);\n    }\n\n\n    const initButtonListeners = function() {\n        $(SELECTOR.CARDCONTAINER).on(EVENT.HOVERIN, function(e) {\n            console.log(\"Card flips\");\n            $(SELECTOR.CARD).css(\"transform\", \"rotateY(180deg)\");\n        });\n\n        $(SELECTOR.CARDCONTAINER).on(EVENT.HOVEROUT, function(e) {\n            console.log(\"Card flips\");\n            $(SELECTOR.CARD).css(\"transform\", \"rotateY(0deg)\");\n        });\n\n        $(SELECTOR.CARD).on(EVENT.CLICK, function(e) {\n            console.log(\"Card clicked\");\n            const currTar = $(e.currentTarget);\n            const faceback = currTar.find(SELECTOR.BACKFACE);\n            const facefront = currTar.find(SELECTOR.FRONTFACE);\n            if(faceback.is(\":visible\")){\n                /*faceback.hide();\n                facefront.show();*/\n                console.log(\"hello from Wordcards\");\n                clearYouGlish(faceback);\n            }else if(facefront.is(\":visible\")){\n                /*facefront.hide();\n                faceback.show();*/\n                console.log(\"hi from Wordcards\");\n            }\n        });\n\n        $(SELECTOR.YOUGLISH_PLACEHOLDER).on(EVENT.CLICK, function(e) {\n            e.stopPropagation();\n            const currTar = $(e.currentTarget);\n            loadYouGlish(currTar.closest(SELECTOR.BACKFACE));\n        });\n    };\n\n    return {\n        init: function () {\n            $(document).ready(function() {\n                initStrings();\n                initButtonListeners();\n                initYouGlish();\n            })\n        }\n    }\n});"],"names":["define","$","ajax","str","log","youglish","SELECTOR","EVENT","initButtonListeners","on","e","console","css","currTar","currentTarget","faceback","find","facefront","is","currentface","debug","youglishwidget","show","hide","clear","clearYouGlish","stopPropagation","youglishholder","youglishplaceholder","load","data","loadYouGlish","closest","init","document","ready","callback","get_strings","key","component","done","strings","getScript"],"mappings":"AAMAA,mCAAO,CAAC,SAAU,YAAa,WAAY,WAAY,2BAA2B,SAASC,EAAGC,KAAMC,IAAIC,IAAKC,gBACnGC,uBACa,aADbA,cAEI,mDAFJA,mBAGS,qBAHTA,kBAIQ,wBAJRA,yBAKe,cALfA,yBAMe,gCANfA,8BAOoB,wBAIpBC,YACK,QADLA,cAEO,YAFPA,eAGQ,iBAwCRC,oBAAsB,WACxBP,EAAEK,wBAAwBG,GAAGF,eAAe,SAASG,GACjDC,QAAQP,IAAI,cACZH,EAAEK,eAAeM,IAAI,YAAa,sBAGtCX,EAAEK,wBAAwBG,GAAGF,gBAAgB,SAASG,GAClDC,QAAQP,IAAI,cACZH,EAAEK,eAAeM,IAAI,YAAa,oBAGtCX,EAAEK,eAAeG,GAAGF,aAAa,SAASG,GACtCC,QAAQP,IAAI,sBACNS,QAAUZ,EAAES,EAAEI,eACdC,SAAWF,QAAQG,KAAKV,mBACxBW,UAAYJ,QAAQG,KAAKV,oBAC5BS,SAASG,GAAG,aAGXP,QAAQP,IAAI,wBAnCF,SAASe,aAC3Bf,IAAIgB,MAAM,qBACNC,eAAiBpB,EAAEK,0BACGa,YAAYH,KAAKV,+BACvBgB,OACpBD,eAAeE,OACflB,SAASmB,QA8BDC,CAAcV,WACTE,UAAUC,GAAG,aAGlBP,QAAQP,IAAI,wBAIpBH,EAAEK,+BAA+BG,GAAGF,aAAa,SAASG,GACtDA,EAAEgB,mBArCW,SAASP,aAC1Bf,IAAIgB,MAAM,oBACNO,eAAiBR,YAAYH,KAAKV,0BAClCsB,oBAAsBT,YAAYH,KAAKV,+BAC3CD,SAASwB,KAAKD,oBAAoBE,KAAK,QAAQH,gBAmC3CI,CADgB9B,EAAES,EAAEI,eACCkB,QAAQ1B,8BAI9B,CACH2B,KAAM,WACFhC,EAAEiC,UAAUC,OAAM,WAvEN,IAAUC,SAC1BjC,IAAIkC,YAAY,CACZ,CAACC,IAAK,eAAgBC,UAAW,iBACjC,CAACD,IAAK,oBAAqBC,UAAW,mBACvCC,MAAK,SAAUC,SACAA,QACS,mBAAZL,UACPA,cAkEA5B,sBA5DRP,EAAEyC,UAAU,6CAA6C,WACrDtC,IAAIgB,MAAM"}