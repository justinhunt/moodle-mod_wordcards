{"version":3,"file":"cardactions.min.js","sources":["../src/cardactions.js"],"sourcesContent":["/**\n * Module to watch my words buttons for clicks and report to back end.\n *\n * @package mod_wordcards\n * @author David Watson - evolutioncode.uk\n */\ndefine(['jquery', 'core/ajax', 'core/str', 'core/log'], function($, ajax, str,log) {\n    const SELECTOR = {\n        CARD: '.definition_flashcards .wc-faces',\n        DETAILSFACE: '[data-face=\"one\"]',\n        TERMFACE: '[data-face=\"two\"]',\n        YOUGLISHFACE: '[data-face=\"three\"]',\n    }\n\n    const CLASS = {\n        BTN_IN_MY_WORDS: 'btn-primary'\n    }\n\n    const EVENT = {\n        CLICK: 'click'\n    }\n\n\n    const FACES = {\n        DETAILS: 'one',\n        TERM: 'two',\n        YOUGLISH: 'three',\n    }\n\n    var youglish_template='<a id=\"yg-widget-0\" class=\"youglish-widget\" data-query=\"@@DATA-QUERY@@\" data-lang=\"english\" data-zones=\"all,us,uk,aus\" data-components=\"8412\" data-bkg-color=\"theme_light\"  rel=\"nofollow\" href=\"https://youglish.com\">Visit YouGlish.com</a>\\n' +\n        '<script async src=\"https://youglish.com/public/emb/widget.js\" charset=\"utf-8\"></script>';\n\n    var stringStore = {};\n\n    const initStrings = function (callback) {\n        str.get_strings([\n            {key: \"addtomywords\", component: \"mod_wordcards\"},\n            {key: \"removefrommywords\", component: \"mod_wordcards\"},\n        ]).done(function (strings) {\n            stringStore = strings;\n            if (typeof callback == 'function') {\n                callback();\n            }\n        });\n    }\n\n    const initButtonListeners = function() {\n        log.debug('button listeners inited');\n        $(SELECTOR.CARD).on(EVENT.CLICK, function(e) {\n            log.debug('click event happened');\n            // There are two buttons for each term (one in grid and one in flashcards).\n            const currTar = $(e.currentTarget);\n\n            var facedetails = currTar.find(SELECTOR.DETAILSFACE);\n            var faceterm = currTar.find(SELECTOR.TERMFACE);\n            var faceyouglish = currTar.find(SELECTOR.YOUGLISHFACE);\n            if(facedetails.is(\":visible\")){\n                log.debug('facedetails is visible');\n                facedetails.hide();\n                faceterm.show();\n            }else if(faceterm.is(\":visible\")){\n                log.debug('faceterm is visible');\n                faceterm.hide();\n                var theterm=facedetails.find('.term-title').text();\n                log.debug(theterm)\n                var widget= youglish_template.replace('@@DATA-QUERY@@', theterm);\n                faceyouglish.html(widget);\n                faceyouglish.show();\n            }else if(faceyouglish.is(\":visible\")){\n                log.debug('faceyouglish is visible');\n                faceyouglish.html('');\n                faceyouglish.hide();\n                facedetails.show();\n            }\n        })\n    }\n\n    return {\n        init: function () {\n            $(document).ready(function() {\n                initStrings();\n                initButtonListeners();\n            })\n        }\n    }\n});"],"names":["define","$","ajax","str","log","SELECTOR","EVENT","youglish_template","init","document","ready","callback","get_strings","key","component","done","strings","debug","on","e","currTar","currentTarget","facedetails","find","faceterm","faceyouglish","is","hide","show","theterm","text","widget","replace","html"],"mappings":"AAMAA,mCAAO,CAAC,SAAU,YAAa,WAAY,aAAa,SAASC,EAAGC,KAAMC,IAAIC,WACpEC,cACI,mCADJA,qBAEW,oBAFXA,kBAGQ,oBAHRA,sBAIY,sBAOZC,YACK,YAUPC,kBAAkB,gVAgDf,CACHC,KAAM,WACFP,EAAEQ,UAAUC,OAAM,WA7CN,IAAUC,SAC1BR,IAAIS,YAAY,CACZ,CAACC,IAAK,eAAgBC,UAAW,iBACjC,CAACD,IAAK,oBAAqBC,UAAW,mBACvCC,MAAK,SAAUC,SACAA,QACS,mBAAZL,UACPA,cAMRP,IAAIa,MAAM,2BACVhB,EAAEI,eAAea,GAAGZ,aAAa,SAASa,GACtCf,IAAIa,MAAM,8BAEJG,QAAUnB,EAAEkB,EAAEE,mBAEhBC,YAAcF,QAAQG,KAAKlB,sBAC3BmB,SAAWJ,QAAQG,KAAKlB,mBACxBoB,aAAeL,QAAQG,KAAKlB,0BAC7BiB,YAAYI,GAAG,YACdtB,IAAIa,MAAM,0BACVK,YAAYK,OACZH,SAASI,YACP,GAAGJ,SAASE,GAAG,YAAY,CAC7BtB,IAAIa,MAAM,uBACVO,SAASG,WACLE,QAAQP,YAAYC,KAAK,eAAeO,OAC5C1B,IAAIa,MAAMY,aACNE,OAAQxB,kBAAkByB,QAAQ,iBAAkBH,SACxDJ,aAAaQ,KAAKF,QAClBN,aAAaG,YACRH,aAAaC,GAAG,cACrBtB,IAAIa,MAAM,2BACVQ,aAAaQ,KAAK,IAClBR,aAAaE,OACbL,YAAYM"}